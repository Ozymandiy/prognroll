!function (o) { o.fn.prognroll = function (r) { var t = o.extend({ height: 5, color: "#50bcb6", custom: !1 }, r), i = o("<span>", { class: "prognroll-bar" }); return this.each(function (r, e) { if (o(this).data("prognroll")) return !1; o(this).data("prognroll", !0), o("body").prepend(i).end().find(".prognroll-bar").not(":first").remove(), i.css({ position: "fixed", top: 0, left: 0, width: 0, height: t.height, backgroundColor: t.color, zIndex: 2147483647 }); var n = { progressBar: o(".prognroll-bar"), windowScrollTop: o(window).scrollTop(), windowOuterHeight: o(window).outerHeight(), bodyHeight: o(document).height() }; function l() { o(window).scroll(function (r) { r.preventDefault(), n.windowScrollTop = o(window).scrollTop(), n.windowOuterHeight = o(window).outerHeight(), n.bodyHeight = o(document).height(); var t = n.windowScrollTop / (n.bodyHeight - n.windowOuterHeight) * 100; n.progressBar.css("width", t + "%") }) } !1 === t.custom ? l() : "none" == o(this).css("max-height") ? l() : o(this).scroll(function (r) { r.preventDefault(); var t = o(this).scrollTop(), i = o(this).outerHeight(), e = t / (o(this).prop("scrollHeight") - i) * 100; n.progressBar.css("width", e + "%") }); var s = n.windowScrollTop / (n.bodyHeight - n.windowOuterHeight) * 100; n.progressBar.css("width", s + "%") }) } }(jQuery);